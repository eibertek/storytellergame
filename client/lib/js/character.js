var constants={LEFT:"L",RIGHT:"R",IDLE:"idle",GO:"go",GORIGHT:"go",JUMP:"jump",ATTACK:"attack",HURT:"hurt",GRUNT:"grunt"},player=function(data){this.name="",this.ia=!1,this.life=0,this.attack=0,this.defense=0,this.image="",this.status=null,this.color="#0000",this.position=new game.canvas.vector(0,0),this.width=0,this.height=0,this.bounds={},this.gravity=!0,this.ethereal=!1,this.jumping=!1,this.grounded=!1,this.attacking=!1,this.damage=!1,this.velX=0,this.velY=0,this.aura=2,this.speed=3,this.self=this,this.orientation=null,this.sprite=null,this.fullLife=null,this.movingAnimation=function(){this.self.velX<1&&this.self.velX>-2&&this.self.velY>-1&&(this.self.status=constants.IDLE),this.self.velY<=-1&&(this.self.status=constants.JUMP),this.self.velX>=1&&(this.self.orientation="R",this.self.status=constants.GO),this.self.velX<=-2&&(this.self.orientation="L",this.self.status=constants.GO),this.self.jumping&&(this.self.status=constants.JUMP),this.self.attacking&&(this.self.status=constants.ATTACK),this.self.damage!==!0||this.self.attacking||(this.self.status=constants.HURT,this.self.damage=!1)},this.create=function(data){with("undefined"!=typeof data.ia&&(this.ia=!!data.ia),"undefined"!=typeof data.name&&(this.name=data.name),"undefined"!=typeof data.x&&(this.position.x=data.x),"undefined"!=typeof data.y&&(this.position.y=data.y),"undefined"!=typeof data.width&&(this.width=data.width),"undefined"!=typeof data.height&&(this.height=data.height),"undefined"!=typeof data.color&&(this.color=data.color),"undefined"!=typeof data.life&&(this.life=data.life),this.fullLife=data.life,"undefined"!=typeof data.attack&&(this.attack=data.attack),"undefined"!=typeof data.sprite&&(this.sprite=data.sprite),this.sprite.left)spritesheet=new SpriteSheet(img,spritesheet[0],spritesheet[1]),idle=new Animation(spritesheet,idle[0],idle[1],idle[2]),go=new Animation(spritesheet,go[0],go[1],go[2]),attack=new Animation(spritesheet,attack[0],attack[1],attack[2]),jump=new Animation(spritesheet,jump[0],jump[1],jump[2]),hurt=new Animation(spritesheet,hurt[0],hurt[1],hurt[2]);with(this.sprite.right)spritesheet=new SpriteSheet(img,spritesheet[0],spritesheet[1]),idle=new Animation(spritesheet,idle[0],idle[1],idle[2]),go=new Animation(spritesheet,go[0],go[1],go[2]),attack=new Animation(spritesheet,attack[0],attack[1],attack[2]),jump=new Animation(spritesheet,jump[0],jump[1],jump[2]),hurt=new Animation(spritesheet,hurt[0],hurt[1],hurt[2])},this.animate=function(t){switch(this.movingAnimation(),this.orientation==constants.RIGHT?spriteTemp=this.sprite.left:spriteTemp=this.sprite.right,this.status){case constants.IDLE:spriteTemp.idle.update(),spriteTemp.idle.draw(this.self.position.x-10,this.self.position.y-10);break;case constants.ATTACK:spriteTemp.attack.update(),spriteTemp.attack.draw(this.self.position.x-10,this.self.position.y-10);break;case constants.GO:spriteTemp.go.update(),spriteTemp.go.draw(this.self.position.x-10,this.self.position.y-10);break;case constants.JUMP:spriteTemp.jump.update(),spriteTemp.jump.draw(this.self.position.x-10,this.self.position.y-10);break;case constants.HURT:spriteTemp.hurt.update(),spriteTemp.hurt.draw(this.self.position.x-10,this.self.position.y-10)}game.canvas.fillRect(new game.canvas.vector(this.self.position.x,this.self.position.y-10),5,this.self.width,{color:"#FF0000"});var e=this.self.life*this.self.width/this.self.fullLife;game.canvas.fillRect(new game.canvas.vector(this.self.position.x,this.self.position.y-10),5,e,{color:"#00FF00"}),game.cinematics?this.cinematicsMovement():this.movement(t)},this.cinematicsMovement=function(){this.self.velX*=game.phisics.friction,this.self.velY+=game.phisics.gravity,this.colliding(),this.self.grounded&&(this.self.velY=0),this.self.position.x+=this.self.velX,this.self.position.y+=this.self.velY},this.movement=function(){if(this.ia===!0)return!1;if(game.pauseInput)return!1;if(input.move.up&&!this.self.jumping&&this.self.grounded&&(this.self.jumping=!0,this.self.grounded=!1,this.self.velY=3*-this.self.speed),input.move.right&&this.self.velX<this.self.speed&&game.centered<=0&&this.self.velX++,input.move.left&&this.self.velX>-this.self.speed&&this.self.velX--,input.move.attack){var t=new sound("/assets/sounds/sword.mp3");t.play(),this.attacking=!0}else this.attacking=!1;this.self.velX*=game.phisics.friction,this.self.velY+=game.phisics.gravity,this.self.grounded=!1,this.colliding(),this.self.grounded&&(this.self.velY=0),game.centered>0?this.self.position.x+=this.self.velX-game.centerVelocity:this.self.position.x+=this.self.velX,this.self.position.y+=this.self.velY},this.clearStatus=function(){this.self.velX=0,this.self.velY=0,this.jumping&&(this.self.jumping=!1)},this.colliding=function(){for(var t=0;t<game.objects.length;t++)if(!game.objects[t].ethereal){var e=game.colCheck(this.self,game.objects[t]);"l"===e||"r"===e?(this.self.velX=0,this.self.jumping=!1):"b"===e?(this.self.grounded=!0,this.self.jumping=!1):"t"===e&&(this.self.velY*=-1)}},this.collidingObjectives=function(){for(var t=0;t<game.objectives.length;t++)if(game.objectives[t].instant!==!0){temp=this.self;var e=game.colCheck_temp(temp,game.objectives[t]);null!=e&&(game.activeObjective=game.objectives[t].id)}return!1},this.collidingCreatures=function(){for(var t=0;t<game.creatures.length;t++){temp=this.self;var e=game.colCheck_temp(temp,game.creatures[t]);if("l"!=e&&"r"!=e||!this.attacking)game.creatures[t].damage=!1;else{var s=new Audio("/assets/sounds/punch2.mp3");s.volume=.5,game.creatures[t].life-=this.attack,game.creatures[t].damage=!0}}return!1},this.create(data)};
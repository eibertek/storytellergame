var creature=function(img,gravity,position,width,height,bounds,options){this.img=null,this.name="",this.id=Math.random().toString(36).substr(2),this.gravity=!0,this.position=new game.canvas.vector(0,0),this.width=0,this.height=0,this.bounds={},this.extra={},this.life=0,this.attack=0,this.ethereal=!1,this.visible=!1,this.movable=!0,this.grounded=!1,this.creature=!1,this.touched=!1,this.damage=!1,this.enemyVelocity=3,this.velX=0,this.velY=0,this.speed=3,this.self=this,this.floor=!1,this.limitWall=!1,this.status=null,this.orientation=null,this.fullLife=null,this.objectives={},this.firstgrounded=!1,this.sprite=null,this.objectives.onDie=null,this.objectives.onAppear=null,this.offset={x:-10,y:-15},this.movingAnimation=function(){if(this.self.velX<1&&this.self.velX>-2&&this.self.velY>-1&&(this.self.status=constants.IDLE),this.self.velY<=-1&&(this.self.status=constants.JUMP),this.self.velX>=1&&(this.self.status=constants.GO),this.self.velX<=-2&&(this.self.status=constants.GO),this.self.touched&&(this.self.status=constants.ATTACK,!game.players[0].attacking==!0)){new Audio("/assets/sounds/punch1.mp3");game.players[0].life-=this.doDamage(),game.players[0].damage=!0}this.self.damage===!0&&(this.self.status=constants.HURT)},this.doDamage=function(){var t=Math.floor(Math.random()*this.attack);return t},this.create=function(img,gravity,position,width,height,options){if("undefined"!=typeof img&&null!=img&&(this.img=img),"undefined"!=typeof gravity&&(this.gravity=gravity),"undefined"!=typeof position&&position instanceof game.canvas.vector&&(this.position=position),"undefined"!=typeof width&&(this.width=width),"undefined"!=typeof height&&(this.height=height),"undefined"!=typeof options){if(this.ethereal=options.ethereal,"undefined"!=typeof options.movable&&(this.movable=options.movable),"undefined"!=typeof options.floor&&(this.floor=options.floor),"undefined"!=typeof options.name&&(this.name=options.name),"undefined"!=typeof options.limitWall&&(this.limitWall=options.limitWall),"undefined"!=typeof options.creature&&(this.creature=options.creature),"undefined"!=typeof options.life&&(this.life=options.life,this.fullLife=options.life),"undefined"!=typeof options.attack&&(this.attack=options.attack),"undefined"!=typeof options.visible?this.visible=options.visible:this.visible=!0,"undefined"!=typeof options.enemyVelocity&&(this.enemyVelocity=options.enemyVelocity),"undefined"!=typeof options.offset&&(this.offset=options.offset),"undefined"!=typeof options.sprite){with(this.sprite=options.sprite,this.sprite.left)spritesheet=new SpriteSheet(img,spritesheet[0],spritesheet[1]),idle=new Animation(spritesheet,idle[0],idle[1],idle[2]),go=new Animation(spritesheet,go[0],go[1],go[2]),attack=new Animation(spritesheet,attack[0],attack[1],attack[2]),jump=new Animation(spritesheet,jump[0],jump[1],jump[2]),hurt=new Animation(spritesheet,hurt[0],hurt[1],hurt[2]);with(this.sprite.right)spritesheet=new SpriteSheet(img,spritesheet[0],spritesheet[1]),idle=new Animation(spritesheet,idle[0],idle[1],idle[2]),go=new Animation(spritesheet,go[0],go[1],go[2]),attack=new Animation(spritesheet,attack[0],attack[1],attack[2]),jump=new Animation(spritesheet,jump[0],jump[1],jump[2]),hurt=new Animation(spritesheet,hurt[0],hurt[1],hurt[2])}"undefined"!=typeof options.objectives&&(this.objectives=options.objectives)}return this.id},this.animate=function(t,i){if(this.movingAnimation(),this.self.creature){if(this.self.life<=0)return game.removeCreature(this.self.id),null;switch(this.orientation==constants.RIGHT?spriteTemp=this.sprite.left:spriteTemp=this.sprite.right,this.status){case constants.GO:spriteTemp.go.update(),spriteTemp.go.draw(this.self.position.x+this.self.offset.x,this.self.position.y+this.self.offset.y);break;case constants.IDLE:spriteTemp.idle.update(),spriteTemp.idle.draw(this.self.position.x+this.self.offset.x,this.self.position.y+this.self.offset.y);break;case constants.ATTACK:spriteTemp.attack.update(),spriteTemp.attack.draw(this.self.position.x+this.self.offset.x,this.self.position.y+this.self.offset.y);break;case constants.JUMP:spriteTemp.jump.update(),spriteTemp.jump.draw(this.self.position.x+this.self.offset.x,this.self.position.y+this.self.offset.y);break;case constants.HURT:spriteTemp.hurt.update(),spriteTemp.hurt.draw(this.self.position.x+this.self.offset.x,this.self.position.y+this.self.offset.y);break;case constants.GRUNT:spriteTemp.hurt.update(),spriteTemp.hurt.draw(this.self.position.x+this.self.offset.x,this.self.position.y+this.self.offset.y)}}else this.life>0?name=this.name+" "+this.life:name=this.name,this.visible&&("undefined"!=typeof this.img&&null!=this.img?canvas.drawImage(this.img,this.self.position.x,this.self.position.y,this.width,this.height):canvas.drawRect(this.position,this.height,this.width,{color:"#000",name:name,creature:!0}));game.canvas.fillRect(new game.canvas.vector(this.position.x,this.position.y-10),5,this.width,{color:"#FF0000"});var e=this.life*this.width/this.fullLife;game.canvas.fillRect(new game.canvas.vector(this.position.x,this.position.y-10),5,e,{color:"#00FF00"}),game.cinematics?this.cinematicsMovement():this.movement(i)},this.cinematicsMovement=function(){this.self.velX*=game.phisics.friction,this.self.velY+=game.phisics.gravity,this.colliding(),this.self.grounded&&(this.self.velY=0),this.self.position.x+=this.self.velX,this.self.position.y+=this.self.velY},this.movement=function(t){if(this.self.velX*=game.phisics.friction,this.self.velY+=game.phisics.gravity,this.self.grounded=!1,this.colliding(),this.self.grounded?(this.firstgrounded=!0,this.self.velY=0):this.self.jumping=!0,this.self.position.y+=this.self.velY,(input.key_code[39]||input.key_code[68]||input.key_code[37]||input.key_code[65])&&(this.touched=!1),this.firstgrounded&&!this.touched){this.self.jumping=!1,charPosition=game.players[0].position;var i=game.colCheck(this.self,game.players[0]);null!==i&&(this.touched=!0),charPosition.x>=this.self.position.x?(this.self.orientation=constants.RIGHT,null==i&&(this.self.velX=this.self.enemyVelocity,this.self.position.x+=this.self.velX)):(this.self.orientation=constants.LEFT,null==i&&(this.self.velX=this.self.enemyVelocity,this.self.position.x-=this.self.velX))}game.centered>0&&(this.self.position.x+=this.self.velX-game.centerVelocity)},this.colliding=function(){for(var t=0;t<game.objects.length;t++)if(!game.objects[t].ethereal&&this.self.id!=game.objects[t].id&&!game.objects[t].limitWall){var i=game.colCheck(this.self,game.objects[t]);"l"===i||"r"===i?(this.self.jumping=!0,this.self.grounded=!1,this.self.velY=2*-this.self.speed):"b"===i?(this.self.grounded=!0,this.self.jumping=!1):"t"===i&&(this.self.velY*=-1)}},this.create(img,gravity,position,width,height,bounds,options),"function"==typeof this.self.objectives.onAppear&&this.self.objectives.onAppear()};
var input={key_a:65,key_b:66,key_c:67,key_d:68,key_e:69,key_f:70,key_g:71,key_h:72,key_i:73,key_j:74,key_k:75,key_l:76,key_m:77,key_n:78,key_o:79,key_p:80,key_q:81,key_r:82,key_s:83,key_t:84,key_u:85,key_v:86,key_w:87,key_x:88,key_y:89,key_z:90,key_left:37,key_up:38,key_right:39,key_down:40,key_space:32,key_enter:13,key_backspace:8,key_F3:114,key_F4:115,key_F5:116,prevent_default:!1,key_code:[],key_press:[],mouse:{x:0,y:0,clicked:!1,down:!1},move:{left:!1,up:!1,right:!1,down:!1,attack:!1},actions:{btnStart:!1},touchableAreas:[],touchableAreasCount:0,touches:[],offsetX:0,offsetY:0,mobile:!1,movingKeyMappingDown:function(){input.key_code[38]!==!0&&input.key_code[87]!==!0||(this.move.up=!0),input.key_code[input.key_down]!==!0&&input.key_code[input.key_s]!==!0||(this.move.down=!0),input.key_code[39]!==!0&&input.key_code[68]!==!0||(this.move.right=!0),input.key_code[37]!==!0&&input.key_code[65]!==!0||(this.move.left=!0),input.key_code[input.key_c]===!0&&(this.move.attack=!0)},movingKeyMappingUp:function(){input.key_code[38]!==!1&&input.key_code[87]!==!1||(this.move.up=!1),input.key_code[input.key_down]!==!1&&input.key_code[input.key_s]!==!1||(this.move.down=!1),input.key_code[39]!==!1&&input.key_code[68]!==!1||(this.move.right=!1),input.key_code[37]!==!1&&input.key_code[65]!==!1||(this.move.left=!1),input.key_code[input.key_c]===!1&&(this.move.attack=!1)},movingTouchMappingDown:function(){var e=game.canvas.container.height,t=game.canvas.container.width;this.touchSection(0,150,e-90,e-45)&&(this.move.up=!0),this.touchSection(0,75,e-40,e)&&(this.move.left=!0),this.touchSection(76,150,e-39,e)&&(this.move.right=!0),this.touchSection(t-100,t,e-90,e)&&(this.move.attack=!0)},movingTouchMappingUp:function(){var e=game.canvas.container.height,t=game.canvas.container.width;this.touchSection(0,90,e-60,e-40)||(this.move.up=!1),this.touchSection(0,50,e-39,e)||(this.move.left=!1),this.touchSection(60,90,e-39,e)||(this.move.right=!1),this.touchSection(t-100,t,e-60,e)||(this.move.attack=!1)},actionTouchMappingDown:function(){var e={x1:0,y1:0,x2:game.canvas.container.width,y2:game.canvas.container.height};this.touchSection(e.x1,e.x2,e.y1,e.y2)&&(this.actions.btnStart=!0)},actionTouchMappingUp:function(){var e={x1:0,y1:0,x2:game.canvas.container.width,y2:game.canvas.container.height};this.touchSection(e.x1,e.x2,e.y1,e.y2)||(this.actions.btnStart=!1)},cinematicsTouchMappingDown:function(){var e=game.canvas.container.height,t=game.canvas.container.width;this.touchSection(0,180,e-100,e-50)&&(this.move.up=!0),this.touchSection(0,180,e-49,e)&&(this.move.down=!0),this.touchSection(t-100,t,e-60,e)&&(this.move.attack=!0)},cinematicsTouchMappingUp:function(){var e=game.canvas.container.height,t=game.canvas.container.width;this.touchSection(0,180,e-100,e-50)||(this.move.up=!1),this.touchSection(0,180,e-49,e)||(this.move.down=!1),this.touchSection(t-100,t,e-60,e)||(this.move.attack=!1)},onKeyDown:function(e,t){return this.prevent_default=!!t,this.key_code[e.keyCode]=!0,this.movingKeyMappingDown(),this.prevent_default&&this.key_code[114]&&e.preventDefault(),!0},onKeyUp:function(e){return this.key_code[e.keyCode]=!1,this.movingKeyMappingUp(),!0},mouseMove:function(e,t){this.mouse.x=e.offsetX,this.mouse.y=e.offsetY,this.mouse.clicked=1==e.which&&!this.mouse.down,this.mouse.down=1==e.which},mouseDown:function(e,t){this.mouse.clicked=!this.mouse.down,this.mouse.down=!0},mouseUp:function(e,t){this.mouse.clicked=!1,this.mouse.down=!1},touchSection:function(e,t,i,n){for(var o=0;o<this.touches.length;o++){var c=this.touches[o].clientX,s=this.touches[o].clientY;if(c>=e&&c<=t&&s>=i&&s<=n)return!0}},clearKeys:function(){this.key_code=[],this.key_press=[],this.touches=[],this.cinematicsTouchMappingUp(),this.movingTouchMappingUp()},isTouching:function(e,t,i){var n=i.position.x+i.width/2-e,o=i.position.y+i.height/2-t,c=i.width/2,s=i.height/2,a=null;if(Math.abs(n)<c&&Math.abs(o)<s){var h=c-Math.abs(n),u=s-Math.abs(o);a=h>=u?o>0?"t":"b":n>0?"l":"r"}return a},setTouchEvents:function(){var e=this,t=function(t){window.navigator.msPointerEnabled&&t.clientX&&t.pointerType===t.MSPOINTER_TYPE_TOUCH?e.touches[t.pointerId]={clientX:t.clientX,clientY:t.clientY}:e.touches=t.touches||[],game.isMobile()&&(game.titleScreen===!0?e.actionTouchMappingDown():game.cinematics===!0?e.cinematicsTouchMappingDown():e.movingTouchMappingDown())},i=function(i){e.paused&&(e.paused=!1),i.preventDefault(),t(i)},n=function(t){t.preventDefault(),e.move.attack=!1,window.navigator.msPointerEnabled&&t.pointerType===t.MSPOINTER_TYPE_TOUCH?delete e.touches[t.pointerId]:e.touches=t.touches||[],game.isMobile()&&(game.titleScreen===!0?e.actionTouchMappingUp():game.cinematics===!0?e.cinematicsTouchMappingUp():e.movingTouchMappingUp())},o=function(e){e.preventDefault(),t(e)};document.body.addEventListener("touchstart",i,!1),document.body.addEventListener("touchend",n),document.body.addEventListener("touchmove",o),window.navigator.msPointerEnabled&&(document.body.addEventListener("MSPointerDown",i),document.body.addEventListener("MSPointerUp",n),document.body.addEventListener("MSPointerMove",o))},toKeyString:function(e){switch(e){case this.key_left:return"LEFT";case this.key_up:return"UP";case this.key_down:return"DOWN";case this.key_right:return"RIGHT";case this.key_space:return"SPACE";case this.key_enter:return"ENTER";case this.key_backspace:return"BACKSPACE";default:return String.fromCharCode(this.key_code)}}};